{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///content-insights-client.min.js","webpack:///webpack/bootstrap 385be6e3edfd577abbb1","webpack:///./src/index.js","webpack:///external \"node-tokens\"","webpack:///external \"node-fetch\""],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_1__","__WEBPACK_EXTERNAL_MODULE_2__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","manageTokens","fetch","ContentInsightsApi","host","tokenName","tokenConfig","_name","tokens","kio","scope","mint","path","headers","getAuthHeaders","then","response","json","token","get","Error","Authorization","Accept","Content-Type","X-Tenant-Id","query","start","end","limit","offset","domain","sort","parameters","undefined","push","encodeURIComponent","join","timeWindow","normalizeEntities"],"mappings":"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","file":"content-insights-client.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"node-tokens\"), require(\"node-fetch\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"content-insights-client\", [\"node-tokens\", \"node-fetch\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"content-insights-client\"] = factory(require(\"node-tokens\"), require(\"node-fetch\"));\n\telse\n\t\troot[\"content-insights-client\"] = factory(root[\"node-tokens\"], root[\"node-fetch\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"node-tokens\"), require(\"node-fetch\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"content-insights-client\", [\"node-tokens\", \"node-fetch\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"content-insights-client\"] = factory(require(\"node-tokens\"), require(\"node-fetch\"));\n\telse\n\t\troot[\"content-insights-client\"] = factory(root[\"node-tokens\"], root[\"node-fetch\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar manageTokens = __webpack_require__(1);\n\tvar fetch = __webpack_require__(2);\n\t\n\tvar ContentInsightsApi = function () {\n\t  function ContentInsightsApi(host, tokenName, tokenConfig) {\n\t    _classCallCheck(this, ContentInsightsApi);\n\t\n\t    this._name = 'ContentInsights';\n\t    this.host = host;\n\t    this.tokenName = tokenName || 'mint';\n\t    this.tokens = manageTokens({\n\t      'kio': { scope: ['uid'] },\n\t      'mint': { scope: ['uid'] }\n\t    }, tokenConfig);\n\t  }\n\t\n\t  _createClass(ContentInsightsApi, [{\n\t    key: 'get',\n\t    value: function get(path) {\n\t      var headers = this.getAuthHeaders(this.tokenName);\n\t\n\t      return fetch(this.host + path, { headers: headers }).then(function (response) {\n\t        return response.json().then(function (json) {\n\t          return { json: json, response: response };\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: 'getAuthHeaders',\n\t    value: function getAuthHeaders() {\n\t      var token = this.tokens.get(this.tokenName);\n\t\n\t      if (!token) {\n\t        throw Error('Could not get a token for: ' + this.tokenName);\n\t      }\n\t      return {\n\t        'Authorization': 'Bearer ' + token,\n\t        'Accept': 'application/x.zalando.content-article+json',\n\t        'Content-Type': 'application/json',\n\t        'X-Tenant-Id': 'Dougal'\n\t      };\n\t    }\n\t  }, {\n\t    key: 'search',\n\t    value: function search(query, start, end, limit, offset, domain, sort) {\n\t      var parameters = [];\n\t\n\t      if (start !== undefined) {\n\t        parameters.push('start=' + encodeURIComponent(start));\n\t      }\n\t      if (end !== undefined) {\n\t        parameters.push('end=' + encodeURIComponent(end));\n\t      }\n\t      if (limit !== undefined) {\n\t        parameters.push('limit=' + encodeURIComponent(limit));\n\t      }\n\t      if (offset !== undefined) {\n\t        parameters.push('offset=' + encodeURIComponent(offset));\n\t      }\n\t      if (domain !== undefined) {\n\t        parameters.push('domain=' + encodeURIComponent(domain));\n\t      }\n\t      if (sort !== undefined) {\n\t        parameters.push('sort=' + encodeURIComponent(sort));\n\t      }\n\t      return this.get('/api/content-articles-search?q=' + encodeURIComponent(query) + '&' + parameters.join('&'));\n\t    }\n\t  }, {\n\t    key: 'timeseries',\n\t    value: function timeseries(query, start, end, limit, offset, domain, sort, timeWindow, normalizeEntities) {\n\t      var parameters = [];\n\t\n\t      if (start !== undefined) {\n\t        parameters.push('start=' + encodeURIComponent(start));\n\t      }\n\t      if (end !== undefined) {\n\t        parameters.push('end=' + encodeURIComponent(end));\n\t      }\n\t      if (limit !== undefined) {\n\t        parameters.push('limit=' + encodeURIComponent(limit));\n\t      }\n\t      if (offset !== undefined) {\n\t        parameters.push('offset=' + encodeURIComponent(offset));\n\t      }\n\t      if (domain !== undefined) {\n\t        parameters.push('domain=' + encodeURIComponent(domain));\n\t      }\n\t      if (sort !== undefined) {\n\t        parameters.push('sort=' + encodeURIComponent(sort));\n\t      }\n\t      if (timeWindow !== undefined) {\n\t        parameters.push('window=' + encodeURIComponent(timeWindow));\n\t      }\n\t      if (normalizeEntities !== undefined) {\n\t        parameters.push('normalize_entities=' + normalizeEntities);\n\t      }\n\t      return this.get('/api/content-articles-timeseries?q=' + encodeURIComponent(query) + '&' + parameters.join('&'));\n\t    }\n\t  }, {\n\t    key: 'article',\n\t    value: function article(id) {\n\t      return this.get('/api/content-articles/' + id);\n\t    }\n\t  }]);\n\t\n\t  return ContentInsightsApi;\n\t}();\n\t\n\texports.default = ContentInsightsApi;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** content-insights-client.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 385be6e3edfd577abbb1\n **/","const manageTokens = require('node-tokens');\nconst fetch = require('node-fetch');\n\nexport default class ContentInsightsApi {\n  constructor(host, tokenName, tokenConfig) {\n    this._name = 'ContentInsights';\n    this.host = host;\n    this.tokenName = tokenName || 'mint';\n    this.tokens = manageTokens({\n      'kio': { scope: ['uid'] },\n      'mint': { scope: ['uid'] }\n    }, tokenConfig);\n  }\n\n  get(path) {\n    var headers = this.getAuthHeaders(this.tokenName);\n\n    return fetch(this.host + path, {headers}).then(response => {\n      return response.json().then(json => ({ json, response }));\n    });\n  }\n\n  getAuthHeaders() {\n    var token = this.tokens.get(this.tokenName);\n\n    if (!token) {\n      throw Error('Could not get a token for: ' + this.tokenName);\n    }\n    return {\n      'Authorization': 'Bearer ' + token,\n      'Accept': 'application/x.zalando.content-article+json',\n      'Content-Type': 'application/json',\n      'X-Tenant-Id': 'Dougal'\n    };\n  }\n\n  search(query, start, end, limit, offset, domain, sort) {\n    var parameters = [];\n\n    if (start !== undefined) {\n      parameters.push(`start=${encodeURIComponent(start)}`);\n    }\n    if (end !== undefined) {\n      parameters.push(`end=${encodeURIComponent(end)}`);\n    }\n    if (limit !== undefined) {\n      parameters.push(`limit=${encodeURIComponent(limit)}`);\n    }\n    if (offset !== undefined) {\n      parameters.push(`offset=${encodeURIComponent(offset)}`);\n    }\n    if (domain !== undefined) {\n      parameters.push(`domain=${encodeURIComponent(domain)}`);\n    }\n    if (sort !== undefined) {\n      parameters.push(`sort=${encodeURIComponent(sort)}`);\n    }\n    return this.get(`/api/content-articles-search?q=${encodeURIComponent(query)}&${parameters.join('&')}`);\n  }\n\n  timeseries(query, start, end, limit, offset, domain, sort, timeWindow, normalizeEntities) {\n    var parameters = [];\n\n    if (start !== undefined) {\n      parameters.push(`start=${encodeURIComponent(start)}`);\n    }\n    if (end !== undefined) {\n      parameters.push(`end=${encodeURIComponent(end)}`);\n    }\n    if (limit !== undefined) {\n      parameters.push(`limit=${encodeURIComponent(limit)}`);\n    }\n    if (offset !== undefined) {\n      parameters.push(`offset=${encodeURIComponent(offset)}`);\n    }\n    if (domain !== undefined) {\n      parameters.push(`domain=${encodeURIComponent(domain)}`);\n    }\n    if (sort !== undefined) {\n      parameters.push(`sort=${encodeURIComponent(sort)}`);\n    }\n    if (timeWindow !== undefined) {\n      parameters.push(`window=${encodeURIComponent(timeWindow)}`);\n    }\n    if (normalizeEntities !== undefined) {\n      parameters.push(`normalize_entities=${normalizeEntities}`);\n    }\n    return this.get(`/api/content-articles-timeseries?q=${encodeURIComponent(query)}&${parameters.join('&')}`);\n  }\n\n  article(id) {\n    return this.get(`/api/content-articles/${id}`);\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/index.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"node-tokens\"\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"node-fetch\"\n ** module id = 2\n ** module chunks = 0\n **/"],"sourceRoot":""}