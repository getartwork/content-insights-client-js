{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///content-insights-client.min.js","webpack:///webpack/bootstrap 2534ff1ac1c1c0b1d2d9","webpack:///./src/index.js","webpack:///external \"node-tokens\"","webpack:///external \"request-promise-native\""],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_1__","__WEBPACK_EXTERNAL_MODULE_2__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","manageTokens","request","ContentInsightsApi","host","tokenName","tokenConfig","agentConfig","_name","tokens","kio","scope","mint","path","parameters","uri","qs","headers","getAuthHeaders","agentOptions","resolveWithFullResponse","simple","then","response","json","JSON","parse","body","token","get","Error","Authorization","Accept","Content-Type","query","start","end","limit","offset","domain","sort","q","undefined","timeWindow","normalizeEntities","window"],"mappings":"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","file":"content-insights-client.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"node-tokens\"), require(\"request-promise-native\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"content-insights-client\", [\"node-tokens\", \"request-promise-native\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"content-insights-client\"] = factory(require(\"node-tokens\"), require(\"request-promise-native\"));\n\telse\n\t\troot[\"content-insights-client\"] = factory(root[\"node-tokens\"], root[\"request-promise-native\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"node-tokens\"), require(\"request-promise-native\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"content-insights-client\", [\"node-tokens\", \"request-promise-native\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"content-insights-client\"] = factory(require(\"node-tokens\"), require(\"request-promise-native\"));\n\telse\n\t\troot[\"content-insights-client\"] = factory(root[\"node-tokens\"], root[\"request-promise-native\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar manageTokens = __webpack_require__(1);\n\tvar request = __webpack_require__(2);\n\t\n\tvar ContentInsightsApi = function () {\n\t  function ContentInsightsApi(host, tokenName, tokenConfig, agentConfig) {\n\t    _classCallCheck(this, ContentInsightsApi);\n\t\n\t    this._name = 'ContentInsights';\n\t    this.host = host;\n\t    this.tokenName = tokenName || 'mint';\n\t    this.agentConfig = agentConfig || {};\n\t    this.tokens = manageTokens({\n\t      'kio': { scope: ['uid'] },\n\t      'mint': { scope: ['uid'] }\n\t    }, tokenConfig);\n\t  }\n\t\n\t  _createClass(ContentInsightsApi, [{\n\t    key: 'get',\n\t    value: function get(path, parameters) {\n\t      return request({\n\t        uri: this.host + path,\n\t        qs: parameters,\n\t        headers: this.getAuthHeaders(this.tokenName),\n\t        agentOptions: this.agentConfig,\n\t        resolveWithFullResponse: true,\n\t        simple: false\n\t      }).then(function (response) {\n\t        var json = JSON.parse(response.body);\n\t\n\t        return { json: json, response: response };\n\t      });\n\t    }\n\t  }, {\n\t    key: 'getAuthHeaders',\n\t    value: function getAuthHeaders() {\n\t      var token = this.tokens.get(this.tokenName);\n\t\n\t      if (!token) {\n\t        throw Error('Could not get a token for: ' + this.tokenName);\n\t      }\n\t      return {\n\t        'Authorization': 'Bearer ' + token,\n\t        'Accept': 'application/x.zalando.content-article+json',\n\t        'Content-Type': 'application/json'\n\t      };\n\t    }\n\t  }, {\n\t    key: 'search',\n\t    value: function search(query, start, end, limit, offset, domain, sort) {\n\t      var parameters = { q: query };\n\t\n\t      if (start !== undefined) {\n\t        parameters.start = start;\n\t      }\n\t      if (end !== undefined) {\n\t        parameters.end = end;\n\t      }\n\t      if (limit !== undefined) {\n\t        parameters.limit = limit;\n\t      }\n\t      if (offset !== undefined) {\n\t        parameters.offset = offset;\n\t      }\n\t      if (domain !== undefined) {\n\t        parameters.domain = domain;\n\t      }\n\t      if (sort !== undefined) {\n\t        parameters.sort = sort;\n\t      }\n\t      return this.get('/api/content-articles-search', parameters);\n\t    }\n\t  }, {\n\t    key: 'timeseries',\n\t    value: function timeseries(query, start, end, limit, offset, domain, sort, timeWindow, normalizeEntities) {\n\t      var parameters = { q: query };\n\t\n\t      if (start !== undefined) {\n\t        parameters.start = start;\n\t      }\n\t      if (end !== undefined) {\n\t        parameters.end = end;\n\t      }\n\t      if (limit !== undefined) {\n\t        parameters.limit = limit;\n\t      }\n\t      if (offset !== undefined) {\n\t        parameters.offset = offset;\n\t      }\n\t      if (domain !== undefined) {\n\t        parameters.domain = domain;\n\t      }\n\t      if (sort !== undefined) {\n\t        parameters.sort = sort;\n\t      }\n\t      if (timeWindow !== undefined) {\n\t        parameters.window = timeWindow;\n\t      }\n\t      if (normalizeEntities !== undefined) {\n\t        parameters['normalize_entities'] = normalizeEntities;\n\t      }\n\t      return this.get('/api/content-articles-timeseries', parameters);\n\t    }\n\t  }, {\n\t    key: 'article',\n\t    value: function article(id) {\n\t      return this.get('/api/content-articles/' + id);\n\t    }\n\t  }]);\n\t\n\t  return ContentInsightsApi;\n\t}();\n\t\n\texports.default = ContentInsightsApi;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** content-insights-client.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 2534ff1ac1c1c0b1d2d9\n **/","const manageTokens = require('node-tokens');\nconst request = require('request-promise-native');\n\nexport default class ContentInsightsApi {\n  constructor(host, tokenName, tokenConfig, agentConfig) {\n    this._name = 'ContentInsights';\n    this.host = host;\n    this.tokenName = tokenName || 'mint';\n    this.agentConfig = agentConfig || {};\n    this.tokens = manageTokens({\n      'kio': { scope: ['uid'] },\n      'mint': { scope: ['uid'] }\n    }, tokenConfig);\n  }\n\n  get(path, parameters) {\n    return request({\n      uri: this.host + path,\n      qs: parameters,\n      headers: this.getAuthHeaders(this.tokenName),\n      agentOptions: this.agentConfig,\n      resolveWithFullResponse: true,\n      simple: false\n    }).then(response => {\n      var json = JSON.parse(response.body);\n\n      return ({ json, response });\n    });\n  }\n\n  getAuthHeaders() {\n    var token = this.tokens.get(this.tokenName);\n\n    if (!token) {\n      throw Error('Could not get a token for: ' + this.tokenName);\n    }\n    return {\n      'Authorization': 'Bearer ' + token,\n      'Accept': 'application/x.zalando.content-article+json',\n      'Content-Type': 'application/json'\n    };\n  }\n\n  search(query, start, end, limit, offset, domain, sort) {\n    var parameters = { q: query };\n\n    if (start !== undefined) {\n      parameters.start = start;\n    }\n    if (end !== undefined) {\n      parameters.end = end;\n    }\n    if (limit !== undefined) {\n      parameters.limit = limit;\n    }\n    if (offset !== undefined) {\n      parameters.offset = offset;\n    }\n    if (domain !== undefined) {\n      parameters.domain = domain;\n    }\n    if (sort !== undefined) {\n      parameters.sort = sort;\n    }\n    return this.get('/api/content-articles-search', parameters);\n  }\n\n  timeseries(query, start, end, limit, offset, domain, sort, timeWindow, normalizeEntities) {\n    var parameters = { q: query };\n\n    if (start !== undefined) {\n      parameters.start = start;\n    }\n    if (end !== undefined) {\n      parameters.end = end;\n    }\n    if (limit !== undefined) {\n      parameters.limit = limit;\n    }\n    if (offset !== undefined) {\n      parameters.offset = offset;\n    }\n    if (domain !== undefined) {\n      parameters.domain = domain;\n    }\n    if (sort !== undefined) {\n      parameters.sort = sort;\n    }\n    if (timeWindow !== undefined) {\n      parameters.window = timeWindow;\n    }\n    if (normalizeEntities !== undefined) {\n      parameters['normalize_entities'] = normalizeEntities;\n    }\n    return this.get('/api/content-articles-timeseries', parameters);\n  }\n\n  article(id) {\n    return this.get(`/api/content-articles/${id}`);\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/index.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"node-tokens\"\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"request-promise-native\"\n ** module id = 2\n ** module chunks = 0\n **/"],"sourceRoot":""}