!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("node-tokens"),require("node-fetch")):"function"==typeof define&&define.amd?define("content-insights-client",["node-tokens","node-fetch"],t):"object"==typeof exports?exports["content-insights-client"]=t(require("node-tokens"),require("node-fetch")):e["content-insights-client"]=t(e["node-tokens"],e["node-fetch"])}(this,function(e,t){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){(function(o){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(2),c=n(3),u=function(){function e(t){r(this,e),this._name="ContentInsights",this.host=t,this.tokenName="content-insights-service",this.tokens=s({"content-insights-service":{scope:["content_insights_service.read","uid"]}},{credentialsDir:o.env.CREDENTIALS_DIR||".",oauthTokeninfoUrl:"https://info.services.auth.zalando.com/oauth2/tokeninfo?access_token=",oauthTokenUrl:"https://token.services.auth.zalando.com/oauth2/access_token?realm=/services"})}return i(e,[{key:"get",value:function(e){var t=this.getAuthHeaders(this.tokenName);return c(this.host+e,{headers:t}).then(function(e){return e.json().then(function(t){return{json:t,response:e}})})}},{key:"getAuthHeaders",value:function(){var e=this.tokens.get(this.tokenName);if(!e)throw Error("Could not get a token for: "+this.tokenName);return{Authorization:"Bearer "+e,Accept:"application/x.zalando.content-article+json","Content-Type":"application/json","X-Tenant-Id":"Dougal"}}},{key:"search",value:function(e,t,n,o,r,i,s){var c=[];return void 0!==t&&c.push("start="+encodeURIComponent(t)),void 0!==n&&c.push("end="+encodeURIComponent(n)),void 0!==o&&c.push("limit="+encodeURIComponent(o)),void 0!==r&&c.push("offset="+encodeURIComponent(r)),void 0!==i&&c.push("domain="+encodeURIComponent(i)),void 0!==s&&c.push("sort="+encodeURIComponent(s)),this.get("/api/content-articles-search?q="+encodeURIComponent(e)+"&"+c.join("&"))}},{key:"timeseries",value:function(e,t,n,o,r,i,s,c,u){var a=[];return void 0!==t&&a.push("start="+encodeURIComponent(t)),void 0!==n&&a.push("end="+encodeURIComponent(n)),void 0!==o&&a.push("limit="+encodeURIComponent(o)),void 0!==r&&a.push("offset="+encodeURIComponent(r)),void 0!==i&&a.push("domain="+encodeURIComponent(i)),void 0!==s&&a.push("sort="+encodeURIComponent(s)),void 0!==c&&a.push("window="+encodeURIComponent(c)),void 0!==u&&a.push("normalize_entities="+u),this.get("/api/content-articles-timeseries?q="+encodeURIComponent(e)+"&"+a.join("&"))}},{key:"article",value:function(e){return this.get("/api/content-articles/"+e)}}]),e}();t["default"]=u,e.exports=t["default"]}).call(t,n(1))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(e){if(h===setTimeout)return setTimeout(e,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(e,0);try{return h(e,0)}catch(t){try{return h.call(null,e,0)}catch(t){return h.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){m&&d&&(m=!1,d.length?p=d.concat(p):v=-1,p.length&&c())}function c(){if(!m){var e=r(s);m=!0;for(var t=p.length;t;){for(d=p,p=[];++v<t;)d&&d[v].run();v=-1,t=p.length}d=null,m=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function a(){}var h,f,l=e.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(e){h=n}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(e){f=o}}();var d,p=[],m=!1,v=-1;l.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||m||r(c)},u.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=a,l.addListener=a,l.once=a,l.off=a,l.removeListener=a,l.removeAllListeners=a,l.emit=a,l.binding=function(e){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,n){t.exports=e},function(e,n){e.exports=t}])});
//# sourceMappingURL=content-insights-client.min.js.map