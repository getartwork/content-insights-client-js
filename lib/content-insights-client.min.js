!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("node-tokens"),require("node-fetch")):"function"==typeof define&&define.amd?define("content-insights-client",["node-tokens","node-fetch"],t):"object"==typeof exports?exports["content-insights-client"]=t(require("node-tokens"),require("node-fetch")):e["content-insights-client"]=t(e["node-tokens"],e["node-fetch"])}(this,function(e,t){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){(function(o){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(2),s=n(3),c=function(){function e(t,n,i){r(this,e);var s=i||{};this._name="ContentInsights",this.host=t,this.tokenName=n,s.credentialsDir=o.env.CREDENTIALS_DIR||".",s.oauthTokeninfoUrl="https://info.services.auth.zalando.com/oauth2/tokeninfo?access_token=",s.oauthTokenUrl="https://token.services.auth.zalando.com/oauth2/access_token?realm=/services",this.tokens=u({kio:{scope:["uid"]},mint:{scope:["uid"]}},s)}return i(e,[{key:"get",value:function(e){var t=this.getAuthHeaders(this.tokenName);return s(this.host+e,{headers:t}).then(function(e){return e.json().then(function(t){return{json:t,response:e}})})}},{key:"getAuthHeaders",value:function(){var e=this.tokens.get(this.tokenName);if(!e)throw Error("Could not get a token for: "+this.tokenName);return{Authorization:"Bearer "+e,Accept:"application/x.zalando.content-article+json","Content-Type":"application/json","X-Tenant-Id":"Dougal"}}},{key:"search",value:function(e,t,n,o,r,i,u){var s=[];return void 0!==t&&s.push("start="+encodeURIComponent(t)),void 0!==n&&s.push("end="+encodeURIComponent(n)),void 0!==o&&s.push("limit="+encodeURIComponent(o)),void 0!==r&&s.push("offset="+encodeURIComponent(r)),void 0!==i&&s.push("domain="+encodeURIComponent(i)),void 0!==u&&s.push("sort="+encodeURIComponent(u)),this.get("/api/content-articles-search?q="+encodeURIComponent(e)+"&"+s.join("&"))}},{key:"timeseries",value:function(e,t,n,o,r,i,u,s,c){var a=[];return void 0!==t&&a.push("start="+encodeURIComponent(t)),void 0!==n&&a.push("end="+encodeURIComponent(n)),void 0!==o&&a.push("limit="+encodeURIComponent(o)),void 0!==r&&a.push("offset="+encodeURIComponent(r)),void 0!==i&&a.push("domain="+encodeURIComponent(i)),void 0!==u&&a.push("sort="+encodeURIComponent(u)),void 0!==s&&a.push("window="+encodeURIComponent(s)),void 0!==c&&a.push("normalize_entities="+c),this.get("/api/content-articles-timeseries?q="+encodeURIComponent(e)+"&"+a.join("&"))}},{key:"article",value:function(e){return this.get("/api/content-articles/"+e)}}]),e}();t["default"]=c,e.exports=t["default"]}).call(t,n(1))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(e){if(f===setTimeout)return setTimeout(e,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function i(e){if(h===clearTimeout)return clearTimeout(e);if((h===o||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function u(){m&&d&&(m=!1,d.length?p=d.concat(p):v=-1,p.length&&s())}function s(){if(!m){var e=r(u);m=!0;for(var t=p.length;t;){for(d=p,p=[];++v<t;)d&&d[v].run();v=-1,t=p.length}d=null,m=!1,i(e)}}function c(e,t){this.fun=e,this.array=t}function a(){}var f,h,l=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(e){f=n}try{h="function"==typeof clearTimeout?clearTimeout:o}catch(e){h=o}}();var d,p=[],m=!1,v=-1;l.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new c(e,t)),1!==p.length||m||r(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=a,l.addListener=a,l.once=a,l.off=a,l.removeListener=a,l.removeAllListeners=a,l.emit=a,l.binding=function(e){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,n){t.exports=e},function(e,n){e.exports=t}])});
//# sourceMappingURL=content-insights-client.min.js.map